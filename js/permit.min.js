/*
* Permit.js
* @version      0.1
* @copyright    Tarek Anandan (http://www.technotarek.com)
*/
(function(e){var t;e.permit=function(n){t=jQuery.extend({permits:["admin"],issueDestination:"reload",revokeDestination:"http://"+window.location.hostname},n);e(document).ready(function(){function r(r){e.cookie(n+r,1);if(t.issueDestination==="reload"){window.location.reload()}else{window.location.href=t.issueDestination}}function i(t){e.each(e(t),function(t,r){e.removeCookie(n+r)})}function s(r){r=typeof r!=="undefined"?r:t.permits;var i=0;e.each(e(t.permits),function(r,s){if(e.cookie(n+t.permits[r])){i++}});return i}var n="permit_";e(".permit-all, .permit-force").hide();e.each(e(t.permits),function(t,n){e(".permit-"+n).hide()});e(".permit-issue").on("click",function(){r(t.permits[0])});e.each(e(t.permits),function(r,i){if(e.cookie(n+t.permits[r])){e(".permit-none").hide();e(".permit-all").show();for(var s=0;s<t.permits.length;s++){if(s!=r){e(".permit-"+i).hide()}}e(".permit-"+i).show()}});if(s()<1){e(".permit-none").show();e(".permit-force").each(function(){var t=e(this).data("permit-message");e(this).html(t).show()})}e("#permit-reissue").on("click",function(){i(t.permits);var n=e("#permit-options").val();r(n)});e(".permit-revoke").click(function(){i(t.permits);window.location.href=t.revokeDestination})})}})(jQuery)